<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Prediction</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .player h1 {
            font-size: 16px;
            line-height: 0.5;
        }

        .card-deck {
            display: flex;
            gap: 7px;
        }

        .card {
            width: 30px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 1.5px 1.5px 1px;
            background-color: #fafafa;
            user-select: none;
            position: relative;
        }

        .rank {
            position: absolute;
            top: 3px;
            font-size: 12px;
            font-weight: 600;
        }

        .suit {
            position: absolute;
            bottom: 3px;
        }

        .hidden {
            border: 2px dashed #888;
            box-sizing: border-box;
            box-shadow: 0 0 0;
            font-weight: 500;
            color:#444;
        }

        #game-score table {
            border: 1px solid black;
            border-collapse: collapse;
            user-select: none;
        }

        #game-score table tr td, #game-score table tr th {
            padding: 5px;
            width: 20px;
            font-size: 12.5px;
            border: 1px solid;
        }

        .submitted-card {
            width: 60px;
            height: 80px;
            margin-bottom: 25px;
            perspective: 750px;
            user-select: none;
            -webkit-user-select: none;
        }

        .card-inner, .front-side, .back-side {
            width: 100%;
            height: 100%;
            border-radius: 5px;
        }

        .card-inner {
            position: relative;
            transition: transform 0.75s;
            transform-style: preserve-3d;
        }

        .submitted-card:hover .card-inner{
            transform: rotateY(180deg);
        }

        .front-side, .back-side {
            position: absolute;
            top: 0;
            left: 0;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .front-side {
            background-color: darkslategrey;
            font-size: 32px;
            font-weight: 600;
            color: #f0f0f0;
            box-shadow: 2px 2px 1px #222;
        }

        .back-side {
            background-color: #f0f0f0;
            font-weight: 500;
            transform: rotateY(180deg);
            box-shadow: 2px 2px 1px #222;
        }

        .player-name {
            text-align: center;
            color: #222;
            font-weight: 500;
            margin-bottom: 5px;
        }

        #game-board {
            width: 300px;
            height: 225px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
    <section id="game-score"></section>
    <section id="game-board">
        <div class="submitted-card">
            <div class="player-name">Andy</div>
            <div class="card-inner">
                <div class="front-side">?</div>
                <div class="back-side">None</div>
            </div>
        </div>
        <div class="submitted-card">
            <div class="player-name">Bob</div>
            <div class="card-inner">
                <div class="front-side">?</div>
                <div class="back-side">None</div>
            </div>
        </div>
        <div class="submitted-card">
            <div class="player-name">Charles</div>
            <div class="card-inner">
                <div class="front-side">?</div>
                <div class="back-side">None</div>
            </div>
        </div>
        <div class="submitted-card">
            <div class="player-name">Derek</div>
            <div class="card-inner">
                <div class="front-side">?</div>
                <div class="back-side">None</div>
            </div>
        </div>
    </section>
    <section id="current-player">
        <h1>Andy</h1>
        <div class="card-deck">
            <div class="card hidden">?</div>
            <div class="card hidden">?</div>
            <div class="card hidden">?</div>
            <div class="card hidden">?</div>
            <div class="card hidden">?</div>
        </div>
        <div>How many win do you expect?</div>
        <input type="number" name="win-prediction" id="win-prediction" max="6">
        <button>Confirm</button>
    </section>

    <script>
        const GamePhase = Object.freeze({
            Deal: "Deal",
            Predict: "Predict",
            Play: "Play",
            Score: "Score"
        });

        const PredictStrategy = Object.freeze({
            User: "User",
            Random: "Random",
            Suit: "Suit",
            Rank: "Rank",
            RankAndSuit: "Rank and Suit",
            RankOrSuit: "Rank or Suit"
        });

        const PlayingStrategy = Object.freeze({
            User: "User",
            Random: "Random",
            LeadSuit: "Lead Suit",
            Aggresive: "Aggresive",
            MiniLoss: "Minimize Losses"
        });

        class Card {
            constructor (suit, rank) {
                this.suit = suit;
                this.rank = rank;
            }
        }

        class Player {
            /** @param {string} name @param {PredictStrategy} predictStrategy @param {PlayingStrategy} playingStrategy*/
            constructor (name, predictStrategy, playingStrategy) {
                this.name = name;
                this.deck = [];
                this.expectedWin = null;
                this.totalWin = 0;
                this.score = 0;
                this.predictStrategy = predictStrategy;
                this.playingStrategy = playingStrategy;
            }
        }

        const shuffle = (array) => {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        const gameBoard = document.getElementById("game-board");
        const gameScore = document.getElementById("game-score");
        const GameManager = {
            round: 5,
            leadIndex: 0,
            leadSuit: null,
            phase: GamePhase.Deal,
            players: [
                new Player("Andy", PredictStrategy.User, PlayingStrategy.User),
                new Player("Bob", PredictStrategy.Random, PlayingStrategy.Random),
                new Player("Charles", PredictStrategy.Random, PlayingStrategy.Random),
                new Player("Derek", PredictStrategy.Random, PlayingStrategy.Random)
            ],
            cardList: [
                new Card("♦️", "A"),
                new Card("♦️", "2"),
                new Card("♦️", "3"),
                new Card("♦️", "4"),
                new Card("♦️", "5"),
                new Card("♦️", "6"),
                new Card("♦️", "7"),
                new Card("♦️", "8"),
                new Card("♦️", "9"),
                new Card("♦️", "10"),
                new Card("♦️", "J"),
                new Card("♦️", "Q"),
                new Card("♦️", "K"),
                new Card("♥️", "A"),
                new Card("♥️", "2"),
                new Card("♥️", "3"),
                new Card("♥️", "4"),
                new Card("♥️", "5"),
                new Card("♥️", "6"),
                new Card("♥️", "7"),
                new Card("♥️", "8"),
                new Card("♥️", "9"),
                new Card("♥️", "10"),
                new Card("♥️", "J"),
                new Card("♥️", "Q"),
                new Card("♥️", "K"),
                new Card("♣️", "A"),
                new Card("♣️", "2"),
                new Card("♣️", "3"),
                new Card("♣️", "4"),
                new Card("♣️", "5"),
                new Card("♣️", "6"),
                new Card("♣️", "7"),
                new Card("♣️", "8"),
                new Card("♣️", "9"),
                new Card("♣️", "10"),
                new Card("♣️", "J"),
                new Card("♣️", "Q"),
                new Card("♣️", "K"),
                new Card("♠️", "A"),
                new Card("♠️", "2"),
                new Card("♠️", "3"),
                new Card("♠️", "4"),
                new Card("♠️", "5"),
                new Card("♠️", "6"),
                new Card("♠️", "7"),
                new Card("♠️", "8"),
                new Card("♠️", "9"),
                new Card("♠️", "10"),
                new Card("♠️", "J"),
                new Card("♠️", "Q"),
                new Card("♠️", "K")
            ],

            init () {
                // this.cardList = shuffle(this.cardList);

                // gameScore.innerHTML = "";
                // const scoreTable = document.createElement("table");
                // const headerRow = document.createElement("tr");
                // const firstHeaderColumn = document.createElement("th");
                // firstHeaderColumn.textContent = "Round";
                // headerRow.appendChild(firstHeaderColumn);
                // for (let r = 1; r <= this.round; r++) {
                //     const roundHeadColumn = document.createElement("th");
                //     roundHeadColumn.textContent = r;
                //     headerRow.appendChild(roundHeadColumn);
                // }
                // const lastHeaderColumn = document.createElement("th");
                // lastHeaderColumn.textContent = "Score";
                // headerRow.appendChild(lastHeaderColumn);
                // scoreTable.appendChild(headerRow);
                // for (let player of this.players) {
                //     const scoreRow = document.createElement("tr");
                //     scoreRow.classList.add("player-score");
                //     const firstColumn = document.createElement("td");
                //     firstColumn.textContent = player.name;
                //     scoreRow.appendChild(firstColumn);
                //     for (let r = 0; r < this.round; r++) {
                //         const roundStatus = document.createElement("td");
                //         roundStatus.classList.add("round-status");
                //         scoreRow.appendChild(roundStatus);
                //     }
                //     const lastColumn = document.createElement("td");
                //     lastColumn.classList.add("final-score");
                //     scoreRow.appendChild(lastColumn);
                //     scoreTable.appendChild(scoreRow);
                // }
                // gameScore.appendChild(scoreTable);

                // let cardCounter = 0;
                // for (let player of this.players) {
                //     for (let j = 0; j < this.round; j++) {
                //         player.deck.push(this.cardList[cardCounter++]);
                //     }
                // }

                // gameContainer.innerHTML= "";
                // for (let player of this.players) {
                //     const playerDisplay = document.createElement("div");
                //     playerDisplay.classList.add("player");
                //     const playerNameDisplay = document.createElement("h1");
                //     playerNameDisplay.textContent = player.name;
                //     const playerCardDeckDisplay = document.createElement("div");
                //     playerCardDeckDisplay.classList.add("card-deck");
                //     for (let card of player.deck) {
                //         const cardDisplay = document.createElement("div");
                //         cardDisplay.classList.add("card");
                //         const cardRankDisplay = document.createElement("div");
                //         cardRankDisplay.classList.add("rank");
                //         cardRankDisplay.textContent = card.rank;
                //         const cardSuitDisplay = document.createElement("div");
                //         cardSuitDisplay.classList.add("suit");
                //         cardSuitDisplay.textContent = card.suit;
                //         cardDisplay.appendChild(cardRankDisplay);
                //         cardDisplay.appendChild(cardSuitDisplay);
                //         playerCardDeckDisplay.appendChild(cardDisplay);
                //     }
                //     playerDisplay.appendChild(playerNameDisplay);
                //     playerDisplay.appendChild(playerCardDeckDisplay);
                //     gameContainer.appendChild(playerDisplay);
                // }
            },
        };

        GameManager.init();
    </script>
</body>
</html>